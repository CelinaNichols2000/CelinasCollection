============================================
QUICK START - TEST YOUR NEW SYSTEM
============================================

IMMEDIATE TESTING (Do This First):
==================================

1. Open farm/farmhouse.html in browser
2. Click on Scarlet's location card
3. Progress through dialogue to Stage 3 (Choosing Your Form)
4. Select "Choose to become a horse"
5. Verify you see the horse-specific transformation text
6. Continue clicking to advance through stages 4, 5, 6 (all should be horse-specific)
7. On reaching stage 7 (The Last Moment of Consciousness), 
   you should be automatically redirected to States/transformation-trapped.html
8. Verify the state page loads and shows countdown timer
9. Check browser console (F12) for any errors

IF YOU SEE ERRORS:
==================

Error: "Cannot read property 'interactions' of undefined"
â†’ Fix: Make sure characterData.scarlet is properly closed with }

Error: "Redirect not triggering"
â†’ Fix: Check that onComplete property is properly formatted in stage 7

Error: "Shows generic stage instead of horse-specific"
â†’ Fix: Verify stageVariant property matches exactly (case-sensitive)

WHAT YOU SHOULD SEE:
====================

Scarlet Stage 1: "Welcome to the Stable" (generic intro)
Scarlet Stage 2: "The Trap Closes" (generic intro)
Scarlet Stage 3: 5 choices for different forms

If you choose HORSE:
- Stage 4: "Horse Form Awakening" (mentions equine, muzzle, etc.)
- Stage 5: "Half-Equine Horror" (mentions hooves, bridle, etc.)
- Stage 6: "Becoming Equine" (mentions chestnut fur, fully transformed)
- Stage 7: "The Last Moment of Consciousness" (final before redirect)
- [AUTO REDIRECT TO transformation-trapped.html]

If you choose COW:
- Stage 4: "Cow Form Awakening" (mentions dairy, udders, etc.)
- Stage 5: "Bovine Metamorphosis" (mentions milking, cow transformation)
- Stage 6: "Bovine Completion" (mentions full cow form)
- Stage 7: Same final stage
- [AUTO REDIRECT]

Success = Each form path has unique descriptive text!

HOW THE STATE FILE WORKS:
==========================

States/transformation-trapped.html does the following:

1. Checks localStorage for 'farmState'
2. Looks up currentForm (should be 'scarlet-horse', 'scarlet-cow', etc.)
3. Checks trappedUntil timestamp
4. If timer expired â†’ auto-redirects to farm.html
5. If timer active â†’ shows countdown
6. Displays form-specific transformation message

The currentForm key is built from: CHARACTER + '-' + VARIANT
So: 'scarlet' + '-' + 'horse' = 'scarlet-horse'

CUSTOMIZING TIMER DURATION:
===========================

In farmhouse.html, find onComplete section:

Current:
{
    action: 'redirect',
    page: 'States/transformation-trapped.html',
    duration: 3*60*60*1000  // 3 hours in milliseconds
}

Change 3 to different number:
- 15*60*1000 = 15 minutes
- 60*60*1000 = 1 hour
- 2*60*60*1000 = 2 hours
- 24*60*60*1000 = 24 hours
- 10*1000 = 10 seconds (for testing!)

TESTING QUICK TIP:
Set duration to 10 seconds while testing so you don't have to wait!

WHAT NEEDS EXPANSION NEXT:
===========================

The system is ready for all remaining characters:
- Iris (Medium): 3 forms, ~18 stages needed
- Aelindor (Medium): 5 forms, ~24 stages needed
- Sparkle (Easy): 3 forms, ~18 stages needed
- Lily (Easy): 4 forms, ~22 stages needed
- Amy (Easy): 4 forms, ~22 stages needed
- Morrigan (Easy): 4 forms, ~22 stages needed

See CHARACTER_EXPANSION_TEMPLATE.txt for exact format to follow!

VERIFY FILE INTEGRITY:
======================

After modification, check:

[ ] No JavaScript console errors (F12 â†’ Console)
[ ] All transformation paths complete properly
[ ] State file displays with correct form name
[ ] Timer counts down correctly
[ ] Auto-redirect works when timer expires
[ ] Browser back-button works properly between pages

BROWSER TESTING DEVICES:
========================

Test on:
[ ] Desktop Chrome
[ ] Desktop Firefox
[ ] Mobile Chrome
[ ] Mobile Safari (if possible)
[ ] Edge (if available)

Mobile Specific:
- Check that state file displays well on small screens
- Verify timer is readable on mobile
- Test scroll behavior

DEBUGGING TIPS:
===============

Enable browser console (F12):
- Look for red error messages
- Check network tab if redirect fails
- Use console.log to trace execution

Common issues:
1. stageVariant doesn't match choice variant
   â†’ Solution: Check spelling exactly matches

2. Stage not found, falls back to previous
   â†’ Solution: Verify stage number and variant exist together

3. Redirect doesn't happen
   â†’ Solution: Confirm onComplete is properly formatted

4. State file shows "Unknown" form
   â†’ Solution: Check transformationVariant is being set correctly

5. Timer doesn't count
   â†’ Solution: Verify JavaScript in state file isn't blocked

COMMAND TO CLEAR GAME STATE:
============================

In browser console (F12):
localStorage.removeItem('farmhouseGameState');
localStorage.removeItem('farmState');
location.reload();

This resets the game if you get stuck.

NEXT STEP AFTER VERIFICATION:
==============================

Once Scarlet is working perfectly:
1. Refer to CHARACTER_EXPANSION_TEMPLATE.txt
2. Start with Iris (simplest - 3 forms)
3. Follow the same pattern for all other characters
4. Test each character thoroughly before moving to next
5. When all characters are done, game is feature-complete!

ESTIMATED TIME TO COMPLETE ALL:
================================

Current: Scarlet done âœ… (1/7 characters)
Iris: 1-2 hours
Aelindor: 2-3 hours (most complex - 5 forms)
Sparkle: 1 hour
Lily: 1.5 hours
Amy: 1.5 hours
Morrigan: 1.5 hours

Total: ~9-12 hours for full expansion

CELEBRATE THIS MILESTONE:
==========================

You now have:
âœ… Full multi-path transformation system
âœ… Working state file integration with timers
âœ… One complete character with 5 unique transformation paths
âœ… Proof-of-concept that all 7 characters can use same system
âœ… Templates for expanding remaining 6 characters

This is a major architectural upgrade! The hard part is done.
The rest is creative writing + following the template.

============================================
READY TO TEST? LET'S GO! ðŸŽ®
============================================
