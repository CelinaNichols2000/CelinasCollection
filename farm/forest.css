@import url("../styles.css");
@import url("../farm.css");

/* Global variables & base refinements */
:root{
  --bg:#071011;
  --panel:#0f1a16;
  --muted:#9fb1a0;
  --accent:#ff7ab6;
    --bg-1: #16060a;
    --bg-2: #2a0f18;
    --card: rgba(255,255,255,0.03);
    --glass: rgba(255,255,255,0.03);
    --muted: #e5cbd8;
    --accent: #ff7ab6; /* main pink */
    --accent-2: #ffb2e6; /* soft pink */
    --accent-3: #ffd7e6; /* highlight */
    --glass-border: rgba(255,255,255,0.06);
    --radius: 12px;
    --fw-heading: 700;
    --fw-body: 400;
  --shadow: 0 8px 30px rgba(2,6,4,0.55);
  --accent-2: #6be3b8;
}

/* Body refinements to blend with existing farm.css */
body {
  background: linear-gradient(180deg,#06100f 0%, #0b1513 100%);
  color: var(--text);
  font-family: Inter, ui-sans-serif, system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial;
  -webkit-font-smoothing:antialiased; -moz-osx-font-smoothing:grayscale;
  line-height:1.5;
}

/* Hero */
.forest-hero{
  padding:44px 28px;
  background: linear-gradient(135deg, rgba(6,11,10,0.82), rgba(18,30,24,0.7));
  color:var(--text);
  border-radius:var(--radius);
  box-shadow:var(--shadow);
  margin-bottom:28px;
  border: 1px solid rgba(255,255,255,0.03);
}

/* Encounters grid & cards */
.encounter-grid{
  display:grid;
  grid-template-columns: repeat(2, 1fr);
  gap:20px;
}
.encounter-grid{display:none;}
.encounter-grid.revealed{display:grid; grid-template-columns:repeat(auto-fit,minmax(280px,1fr)); gap:18px;}
@media (max-width:880px){ .encounter-grid { grid-template-columns: 1fr; } }

.encounter{
  background: linear-gradient(180deg, rgba(255,255,255,0.02), rgba(0,0,0,0.02));
  border-radius:12px;
  padding:18px;
  border:1px solid rgba(255,255,255,0.03);
  box-shadow: 0 6px 18px rgba(0,0,0,0.45);
  transition: transform .22s ease, box-shadow .22s ease;
}
.encounter:hover{ transform: translateY(-6px); box-shadow: 0 16px 40px rgba(2,6,4,0.6); }

.heading{ display:flex; gap:12px; align-items:center; }
.placeholder-image{
  width:140px; height:100px; border-radius:10px;
  background:linear-gradient(135deg,#3a1223,#5a1238);
  color:#fff; display:flex; align-items:center; justify-content:center; font-size:13px;
  flex-shrink:0; box-shadow: inset 0 -6px 16px rgba(0,0,0,0.25);
}

/* body text inside encounter */
.encounter-body{ margin-top:12px; color:var(--muted); font-size:15px; }
.details summary{ cursor:pointer; color:var(--accent-2); }

/* choices */
.choices{ margin-top:14px; display:flex; gap:8px; flex-wrap:wrap; }
.choice{
  background:linear-gradient(180deg,var(--accent), #ff5bb6);
  border:none; color:#2b0710; padding:9px 14px; border-radius:10px; cursor:pointer; font-weight:700;
  box-shadow: 0 8px 26px rgba(255,90,150,0.08);
}
.choice:hover{ transform: translateY(-3px); }
.choice.ghost{ background:transparent; color:var(--muted); border:1px solid rgba(255,255,255,0.04); font-weight:600; }

/* Result blocks — animated reveal for inline choices */
.result{
  margin-top:12px;
  padding:0 12px;
  background: rgba(255,255,255,0.02);
  border-radius:8px;
  color:var(--text);
  border:1px solid rgba(255,255,255,0.02);
  max-height:0; overflow:hidden; opacity:0;
  transition: max-height .36s ease, opacity .28s ease, padding .24s ease;
}
.result.open{ padding:12px; max-height:720px; opacity:1; }

/* decorative image within results */
.result-image{ width:110px; height:80px; min-width:110px; border-radius:8px; background:linear-gradient(135deg,#0e3a23,#224a2e); color:rgba(255,255,255,0.8); display:flex; align-items:center; justify-content:center; font-size:13px; margin-right:12px; float:left }
.result .result-text{ overflow:hidden }
.result:after{content:'';display:block;clear:both}

/* Wander section */
.wander-section{ background: linear-gradient(180deg, rgba(255,255,255,0.01), rgba(255,255,255,0.00)); border-radius:12px; padding:16px; border:1px solid rgba(255,255,255,0.03); margin-top:22px; }
.wander-text{ color:var(--muted); margin-bottom:12px; }
.wander-controls{ display:flex; gap:12px; align-items:center; }

/* subtle focus */
button:focus{ outline: 3px solid rgba(107,227,184,0.12); outline-offset:2px; border-radius:8px; }

/* small utility */
.muted{ color:var(--muted); font-size:13px; }
.muted-anim{ opacity:.6; transform: translateY(2px); transition: transform .2s, opacity .2s; }

/* Modal styling — full-screen centered panel */
#encounter-modal{position:fixed; inset:0; display:none; align-items:center; justify-content:center; z-index:1200}
#encounter-modal.open{display:flex}
.modal-backdrop{position:absolute; inset:0; background:linear-gradient(0deg, rgba(3,6,4,0.6), rgba(3,6,4,0.6)); backdrop-filter: blur(4px);}
.modal-panel{position:relative; z-index:1; width:min(840px, calc(100% - 64px)); background:linear-gradient(180deg, rgba(10,22,12,0.95), rgba(6,14,10,0.98)); border-radius:14px; padding:18px; box-shadow:0 30px 80px rgba(0,0,0,0.7); border:1px solid rgba(255,255,255,0.03)}
.modal-header{display:flex; flex-direction:column; gap:6px; margin-bottom:12px}
.modal-header h3{margin:0; font-size:20px; color:#f6fff6}
.modal-header .muted{color:var(--muted); font-size:13px}
.modal-grid{display:grid; grid-template-columns:150px 1fr; gap:12px; align-items:start}
.modal-image{background:linear-gradient(135deg,#082815,#0b3c2a); border-radius:8px; padding:12px; color:rgba(255,255,255,0.7); min-height:120px; display:flex; align-items:center; justify-content:center}
.modal-text p{margin:0 0 8px 0; color: #d9edd6}
.modal-footer{margin-top:12px; display:flex; flex-direction:column; gap:10px}
.modal-footer .modal-result{padding:12px; border-radius:10px; background:linear-gradient(180deg, rgba(255,255,255,0.02), rgba(0,0,0,0.06)); color:#f5e6ef}
.modal-choice{background:linear-gradient(180deg,var(--accent),#ff6aa8); color:#2b0710; padding:10px 12px; border-radius:10px; border:0; font-weight:700}
.modal-choice:hover{filter:brightness(1.03)}
.modal-close{position:absolute; right:12px; top:10px; background:transparent; border:0; color:var(--muted); font-size:22px; cursor:pointer}

/* when a result/card is focused, dim other encounters */
.encounter.dimmed{opacity:0.18; transform:none; filter:blur(0.6px); pointer-events:none}
.encounter.is-focal{opacity:1; transform:translateY(-6px); box-shadow:0 28px 60px rgba(42,6,18,0.55); z-index:10}

/* prevent background scroll while modal open */
.modal-open{overflow:hidden}

/* Accessibility & focus */
.choice:focus,.modal-choice:focus,.modal-close:focus{outline:3px solid rgba(126,231,135,0.15); outline-offset:3px}

/* Small screens adjustments */
@media (max-width:640px){
  .modal-grid{grid-template-columns:1fr}
  .heading .placeholder-image{min-width:64px}
  .farm-title{font-size:20px}
}

/* subtle entrance */
@keyframes popIn{from{transform:translateY(6px) scale(.995);opacity:0}to{transform:none;opacity:1}}
.encounter{animation:popIn .22s ease both}

