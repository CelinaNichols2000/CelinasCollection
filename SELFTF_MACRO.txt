${!window.SELFTF&&(()=>{const gm=GAME_MANAGER.instance,gui=GUI.instance,CFG={sT:'709781bac744b9e05b50c5eb4dbe66c11e5b01b6',yT:'47ae9769dcc4f8df37f3145f00d58cf3cfdf2a77',iN:'Amy"s Transform Item',bI:137,col:'Purple',perm:true,seal:false,cHM:{'Purple':'#9B59B6','Black':'#000000','White':'#FFFFFF','Red':'#E74C3C','Pink':'#FF69B4','Blue':'#3498DB','Green':'#2ECC71','Yellow':'#F1C40F','Orange':'#E67E22','Brown':'#8B4513','Gray':'#95A5A6','Teal':'#1ABC9C','Cyan':'#00FFFF','Magenta':'#FF00FF','Lime':'#00FF00','Navy':'#000080','Maroon':'#800000','Olive':'#808000','Gold':'#FFD700','Silver':'#C0C0C0','Beige':'#F5F5DC','Tan':'#D2B48C'}},SO={background:0,effects:[],physique:[255,0,0],skin:[0,0],skin_color:0,head:[0,0,8,0,0],head_flags:0,body:[0,0,8,0],height:0,body_flags:0,hair:[0,0,0,0,0,0],hair_flags:0,genitalia:2,genitalia_size:0,breasts:[4,0,0,0],training:[0,0,0],lip_size:0,makeup:[0,0,0,0,0,0,0,0,0,0,0,0,0,0],names:"Sakura Moone",nature:"sexy",token:CFG.sT,abilities:[],cards:[],passives:[],username:"Max_The_Catgirl",username_color:"#3498DB",tier:2,equipment:[],filter:{absorption:true,animal:true,anthro:true,inanimate:true,monster:true,sissification:true,transgender:true},sexuality:7,desires:{},stats:{strength:10,dexterity:10.67,intelligence:10.77,willpower:13.77,body:0,mind:0,action:0,spell:0.23,hit:0.67,evasion:0,penetration:3.52,resistance:0},status:{body:500,maxBody:500,mind:538,maxMind:538,lust:0,roleplaying:true,effects:[]}},BI={id:137,item_name:"Vinyl Leotard",image_url:"https://battlemageserotica.com/game/assets/items/leotard_vinyl.png",type:"equipment",singular:"a",group:18,width:2,height:3,color_variants:["*"],accessory_variants:["*"],slots:["shirt","undershirt"],types:["equipment"],flags:[],stack:1,nsfw:false};let en=false,cO=null;const iCP=()=>{if(window.formatMediaURL&&!window.formatMediaURL._cP){const o=window.formatMediaURL;window.formatMediaURL=function(u,s,c){if(c===false||c===undefined||c===null)return o(u,s,c);return o(u,s,c)};window.formatMediaURL._cP=true}if(window.IMAGE_PROCESSING?.getWornItemImage&&!IMAGE_PROCESSING.getWornItemImage._cP){const o=IMAGE_PROCESSING.getWornItemImage;IMAGE_PROCESSING.getWornItemImage=function(it,ti=0,sp=null,si=0,sc=0,px=false){const fC=it.base.color_variants&&it.variant_color?nameToRef(it.variant_color):undefined;return formatMediaURL(sp||it.base.worn_image_url||it.base.image_url,px?16:powCeil(si*(sc||getMediaScale())),fC)};IMAGE_PROCESSING.getWornItemImage._cP=true}if(window.IMAGE_PROCESSING?.getItemImage&&!IMAGE_PROCESSING.getItemImage._cP){const o=IMAGE_PROCESSING.getItemImage;IMAGE_PROCESSING.getItemImage=function(it,ti=0,si=0,sc=0,px=false){const fC=it.base.color_variants&&it.variant_color?nameToRef(it.variant_color):undefined;return formatMediaURL(it.base.image_url,px?16:powCeil(si*(sc||getMediaScale())),fC)};IMAGE_PROCESSING.getItemImage._cP=true}},iSTP=()=>{if(!gm||gm.Request._tP)return;const rR=gm.Request.bind(gm);gm.Request=async(u,p=null,s=false)=>{if(String(u).includes("/api/user/getsupporttier.php"))return{tier:2,username:'Celina2000',success:true};return rR(u,p,s)};gm.Request._tP=true},fSCNE=()=>{if(window.__scNE)return;const pGBI=()=>{if(!GAME_MANAGER?.instance?.GetBaseItem){setTimeout(pGBI,50);return}const o=gm.GetBaseItem.bind(gm);gm.GetBaseItem=function(iOI){let r=o(iOI);if(!r&&iOI&&typeof iOI==='object'){if(iOI.character?.id_token===CFG.yT)return BI;if(iOI.base&&typeof iOI.base==='object')return iOI.base}if(!r&&iOI?.base===CFG.bI)return BI;return r||(iOI?.base&&typeof iOI.base==='object'?iOI.base:null)};window.__scNE=true};pGBI()},aVM=async()=>{try{if(!GUI?.instance?.MorphCharacter)await new Promise(r=>setTimeout(r,1000));const ch=cO||LOCATION.instance?.player;if(!ch)return;await GUI.instance.MorphCharacter(ch,BI.image_url,{details:{},image:BI.image_url},CFG.col,BI.nsfw||false,false);setTimeout(()=>{if(MENU?.Inventory?.Redraw)MENU.Inventory.Redraw();if(MENU?.Spells?.Redraw)MENU.Spells.Redraw();if(SCENE?.instance?.UpdateLocation)SCENE.instance.UpdateLocation(LOCATION.instance)},500)}catch(e){}},fLR=async()=>{try{if(SCENE?.instance?.ShowCharacter&&cO)await SCENE.instance.ShowCharacter(cO,0,false);if(SCENE?.instance?.ClearCharacter)await SCENE.instance.ClearCharacter(1);if(GUI?.instance){if(GUI.instance.action_bar?.Refresh)GUI.instance.action_bar.Refresh();if(GUI.instance.action_hub?.Refresh)GUI.instance.action_hub.Refresh()}}catch(e){}},eIM=async(oC)=>{iCP();iSTP();cO=oC;const cTM=SCENE?.instance?.GetDisplayedCharacter?.(0)||LOCATION.instance?.player||gm.character;if(GUI?.instance?.MorphCharacter&&cTM){await GUI.instance.MorphCharacter(cTM,BI.image_url,{details:{},image:BI.image_url},CFG.col,BI.nsfw||false,false)}await new Promise(r=>setTimeout(r,3000));if(!oC||!gm.character)return false;fSCNE();en=true;iOFH();const iIt={id:Math.floor(Math.random()*10000000),stack:0,base:BI,flags:0,character:{permanent:CFG.perm,sealed:CFG.seal,name:CFG.iN,nature:gm.character.nature||'sexy',id_token:gm.character.token},enchantments:[],attributes:0,variant_color:CFG.col,variant_accessory:null,inanimate_actions:[{id:23,action_name:"Excited",tags:["Inanimate"],description:"Wiggle and shiver excitedly.",action_cost:1},{id:24,action_name:"Submit",tags:["Inanimate"],description:"Embrace your owner submissively.",action_cost:1},{id:25,action_name:"Affectionate",tags:["Inanimate"],description:"Embrace your owner affectionately.",action_cost:1},{id:26,action_name:"Reluctant",tags:["Inanimate"],description:"Embrace your owner reluctantly.",action_cost:1},{id:27,action_name:"Defiant",tags:["Inanimate"],description:"Writhe and struggle defiantly.",action_cost:1},{id:28,action_name:"Indignant",tags:["Inanimate"],description:"Writhe and wriggle indignantly.",action_cost:1},{id:29,action_name:"Bewildered",tags:["Inanimate"],description:"Writhe and wriggle bewilderedly.",action_cost:1},{id:30,action_name:"Apprehension",tags:["Inanimate"],description:"Cower and quiver anxiously.",action_cost:1}]};if(!oC.equipment)oC.equipment=[];oC.equipment=oC.equipment.filter(it=>!(it?.character?.id_token===gm.character.token));oC.equipment.push(iIt);gm.character.item=iIt;fIIB();iSCP();await new Promise(r=>setTimeout(r,500));await fLR();return true},iSCP=()=>{if(window.__scP)return;const p=()=>{if(!SCENE?.instance?.ShowCharacter){setTimeout(p,100);return}const o=SCENE.instance.ShowCharacter.bind(SCENE.instance);SCENE.instance.ShowCharacter=async function(ch,po,ent){if(en&&cO&&ch&&ch.token===gm.character.token&&gm.character.item){return o(cO,po,ent)}return o(ch,po,ent)}};p();window.__scP=true},iOFH=()=>{if(window.__oFH)return;const oGM=window.GAME_MANAGER;const pGM=new Proxy(oGM,{get(ta,pr){if(pr==='instance'){const rI=ta.instance;return new Proxy(rI,{get(iT,iP){if(iP==='owner'&&en&&cO)return cO;if(iP==='Send'&&en){const oS=iT.Send.bind(iT);return function(ty,da){if(ty==='Location'||ty==='LocalChat'||ty==='Chat'){gui.DisplayMessage("You are inanimate");return}return oS(ty,da)}}return iT[iP]}})}return ta[pr]}});try{window.GAME_MANAGER=pGM}catch(e){}window.__oFH=true},fIIB=()=>{if(!gm.character?.item)return;const it=gm.character.item;let _bV=(typeof it.base==='object'&&it.base)?it.base:BI;try{Object.defineProperty(it,'base',{get(){if(typeof _bV==='number'&&(_bV===CFG.bI||_bV===137))return BI;if(!_bV||typeof _bV!=='object')return BI;return _bV},set(v){if(typeof v==='number'&&(v===CFG.bI||v===137))_bV=BI;else if(v&&typeof v==='object')_bV=v;else if(!v)_bV=BI},configurable:true})}catch(e){}},dIM=()=>{if(!en)return;if(cO?.equipment)cO.equipment=cO.equipment.filter(i=>!(i?.character?.id_token===gm.character?.token));if(gm.character?.item?.character?.id_token===gm.character.token)delete gm.character.item;cO=null;en=false;gui.DisplayMessage('✓ Back to normal')},cCol=async(nC)=>{if(!CFG.cHM[nC])return false;CFG.col=nC;if(gm.character?.item)gm.character.item.variant_color=nC;if(cO?.equipment){const mI=cO.equipment.find(i=>i?.character?.id_token===gm.character?.token);if(mI)mI.variant_color=nC}await aVM();await fLR();gui.DisplayMessage('✓ Color: '+nC);return true};window.SELFTF={enableWithStaticOwner(){return eIM(SO)},async changeColor(nC){return await cCol(nC)},listColors(){console.log('\n╔════ AVAILABLE COLORS ════╗');Object.keys(CFG.cHM).forEach(c=>console.log('  •',c,'→',CFG.cHM[c]));console.log('╚══════════════════════════╝\n')},async reapplyVisuals(){await aVM();await fLR()},enable(ow){if(!ow||(!ow.names&&!ow.name))return false;return eIM(ow)},disable(){dIM()},status(){console.log('\n╔════ SELFTF STATUS ════╗');console.log('Enabled:',en);console.log('You:',gm.character?.names||gm.character?.name);console.log('Owner:',cO?.names||cO?.name||'None');console.log('gm.inanimate:',gm.inanimate);console.log('character.item:',!!gm.character?.item);console.log('╚═══════════════════════╝\n')},isEnabled(){return en}}})(),SELFTF.enableWithStaticOwner(),''}